<!DOCTYPE html>
<html lang="en">

<head>
  <title>Account Page</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <link rel="stylesheet" href="styles/navigation_bar_style.css">
</head>

<body id="body">
  <!-- Header Navigation Bar -->
  <div class="topnav" id="myTopnav">
    <a href="index.html">Small N' Local</a>
    <a href="#BestSellers" class="active">Bestsellers</a>
    <a href="#New" class="active">NEW!</a>
    <a href="#OnSale" class="active">On Sale</a>
    <div class="search-container responsive">
        <form>
            <input id="searchBar" type="text" placeholder="Search.." name="search">
            <button id="searchButton" class="active"><i class="fa fa-search"></i></button>
        </form>
    </div>
    <a href="Store_User_Account.html" id="profileImageLink"><img src="images/Profile image.png" class="responsive"
            id="profileImage" alt="Image was not able to load"></a>
    <a href="cart.html" id="shoppingCartLink"><img src="images/shoppingcart.png" class="responsive"
            id="shoppingCartImage" alt="Image was not able to load"></a>

    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
    </a>
</div>

  <script src="scripts/jquery-3.6.0.min.js"></script>
  <script src="scripts/un_imp_feats.js"></script>


  <script>
    function myFunction() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }
  </script>
  </div>
  <div>

    <div>
      <h1>Your Account</h1>
    </div>
    <div>
      <form>
        <label for="uName" id="uNameLabel">Username: </label>
        <br>
        <input type="text" id="uName" name="uName">
      </form>
      <form>
        <label for="fName">First Name: </label>
        <br>
        <input type="text" id="fName" name="fName">
      </form>
      <form>
        <label for="lName">Last Name: </label>
        <br>
        <input type="text" id="lName" name="lName">
      </form>
      <button id="saveButton">Done</button>
      <button id="loadButton">Load</button>
    </div>
  </div>
</body>
<style>
  * {
    margin: 0px;
  }
</style>








<script src="scripts/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {

  });

</script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-analytics.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-firestore.js"></script>
<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyCs59A6L5jovGzusswqyU834QF0aR_ArFg",
    authDomain: "team38smallnlocal.firebaseapp.com",
    databaseURL: "https://team38smallnlocal-default-rtdb.firebaseio.com",
    projectId: "team38smallnlocal",
    storageBucket: "team38smallnlocal.appspot.com",
    messagingSenderId: "850338400544",
    appId: "1:850338400544:web:1390907581d4761e08ef45",
    measurementId: "G-G3R4Z16DQ1"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
  var firestore = firebase.firestore();

  //create reference to firestore
  const docRef = firestore.doc("Accounts/aqs1lv852uwoCZB7009P");

  //Create query selectors for page elements
  const uNameField = document.querySelector("#uName");
  const fNameField = document.querySelector("#fName");
  const lNameField = document.querySelector("#lName");
  const doneButton = document.querySelector("#saveButton");
  const loadButton = document.querySelector("#loadButton");

  //Create event listener for button click
  doneButton.addEventListener("click", function () {
    const textToSave = uNameField.value;
    const textToSave2 = fNameField.value;
    const textToSave3 = lNameField.value;
    console.log("Setting " + textToSave + " as Username");
    console.log("Setting " + textToSave2 + " as FirstName");
    console.log("Setting " + textToSave3 + " as LastName");
    docRef.set({
      Username: textToSave,
      FirstName: textToSave2,
      LastName: textToSave3
    }).then(function () {
      console.log("Info saved!");
      alert("Info saved!");
    }).catch(function (error) {
      console.log("Got an error: ", error);
    });
  });
  /*
  loadButton.addEventListener("click", function() {
      docRef.get().then(function(doc) {
          if(doc && doc.exists) {
              const myData = doc.data();
              uNameField.value = myData.Username;
              fNameField.value = myData.FirstName;
              lNameField.value = myData.LastName;
              console.log("Loaded values");           
          }
      });
  });
  */

  docRef.get().then(function (doc) {
    if (doc && doc.exists) {
      const myData = doc.data();
      uNameField.value = myData.Username;
      fNameField.value = myData.FirstName;
      lNameField.value = myData.LastName;
      console.log("Loaded values");
    }
  })

</script>

</html>